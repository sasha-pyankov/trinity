"use strict";document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("form");function t(e){e.parentElement.classList.add("_error"),e.classList.add("_error")}function n(e){e.parentElement.classList.remove("_error"),e.classList.remove("_error")}function r(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function s(e){return!/^[\d\+][\d\(\)\ -]{4,14}\d$/.test(e.value)}e.addEventListener("submit",(async function(a){if(a.preventDefault(),0===function(e){let a=0,i=document.querySelectorAll("._req");for(let e=0;e<i.length;e++){const o=i[e];n(o),o.classList.contains("_email")?r(o)&&(t(o),a++):o.classList.contains("_phone")?s(o)&&(t(o),a++):("checkbox"===o.getAttribute("type")&&!1===o.checked||""===o.value)&&(t(o),a++)}return a}()){e.classList.add("_sending");let t=await fetch("sendmail.php",{type:"POST",body:formData});if(t.ok){let n=await t.json();alert(n.massage),i.innerHTML="",e.reset(),e.classList.remove("_sending")}else alert("Ошибка1"),e.classList.remove("_sending")}}));const a=document.getElementById("formImage"),i=document.getElementById("formPreview");a.addEventListener("change",(()=>{!function(e){if(!["image/jpeg","image/png","image/gif"].includes(e.type))return alert("Разрешены только изображения."),void(a.value="");if(e.size>2097152)return void alert("Файл должен быть меньше 2 Мб.");var t=new FileReader;t.onload=function(e){i.innerHTML=`<img src="${e.target.result}" alt="Фото">`},t.onerror=function(e){alert("Ошибка")},t.readAsDataURL(e)}(a.files[0])}))}));